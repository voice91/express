/**
 * This file is generated by Appinvento, also it can be overwritten by Appinvento.
 * Only fields name will be overwritten, if the field name will be changed.
 */
import Joi from 'joi';
import enumFields from 'models/enum.model';

Joi.objectId = require('joi-objectid')(Joi);

const termsEmbed = Joi.object().keys({
  initialFunding: Joi.number().integer().required(),
  futureFunding: Joi.number().integer(),
  totalLoanAmount: Joi.number().integer(),
  interestRateType: Joi.string().valid(...Object.values(enumFields.EnumInterestRateTypeOfTerms)),
  interestRateIndexValue: Joi.string(),
  interestRateIndexDate: Joi.date(),
  spread: Joi.number().integer(),
  totalRate: Joi.string(),
  rateNotes: Joi.string(),
  initialTerm: Joi.string(),
  extensionOptionOne: Joi.string(),
  extensionFee: Joi.string(),
  interestRateIndex: Joi.string(),
  extensionOptionTwo: Joi.string(),
  LTC: Joi.string(),
  extensionFeeTwo: Joi.string(),
  termNotes: Joi.string(),
  prePayment: Joi.array().items(Joi.number()),
  IO: Joi.string(),
  amortization: Joi.string(),
  originationFee: Joi.string(),
  exitFee: Joi.string(),
  recourse: Joi.string(),
  asIsLTV: Joi.string(),
  stabilizedLTV: Joi.string(),
  asIsDY: Joi.string(),
  stabilizedDY: Joi.string(),
  asIsDSCR: Joi.string(),
  generalNotes: Joi.string(),
});
const TermSheetSchema = Joi.object().keys({
  url: Joi.string(),
  fileName: Joi.string(),
});
export const createLenderPlacement = {
  body: Joi.object().keys({
    lendingDetails: Joi.array().items(
      Joi.object().keys({
        lendingInstitution: Joi.objectId().required(),
        lenderProgram: Joi.objectId().required(),
        deal: Joi.objectId().required(),
      })
    ),
    lenderContact: Joi.objectId(),
    notes: Joi.array().items(Joi.string()),
    stage: Joi.string().valid(...Object.values(enumFields.EnumStageOfLenderPlacement)),
    terms: termsEmbed,
    termSheet: TermSheetSchema,
  }),
};

export const updateLenderPlacement = {
  body: Joi.object().keys({
    lendingInstitution: Joi.objectId(),
    lenderContact: Joi.objectId(),
    notes: Joi.array().items(Joi.string()),
    stage: Joi.string().valid(...Object.values(enumFields.EnumStageOfLenderPlacement)),
    terms: termsEmbed,
    termSheet: TermSheetSchema,
  }),
  params: Joi.object().keys({
    lenderPlacementId: Joi.objectId().required(),
  }),
};

export const getLenderPlacementById = {
  params: Joi.object().keys({
    lenderPlacementId: Joi.objectId().required(),
  }),
};

export const deleteLenderPlacementById = {
  params: Joi.object().keys({
    lenderPlacementId: Joi.objectId().required(),
  }),
};

export const getLenderPlacement = {
  body: Joi.object().keys({}).unknown(true),
};

export const paginatedLenderPlacement = {
  body: Joi.object().keys({}).unknown(true),
  query: Joi.object()
    .keys({
      page: Joi.number().default(1),
      limit: Joi.number().default(10).max(100),
    })
    .unknown(true),
};

export const sendDeal = {
  body: Joi.object().keys({
    lenderInstitute: Joi.array().items(Joi.objectId()).required(),
    deal: Joi.objectId().required(),
    lenderPlacement: Joi.objectId().required(),
  }),
};

export const getEmailTemplateId = {
  params: Joi.object().keys({
    emailTemplateId: Joi.objectId().required(),
  }),
};

export const getEmailTemplatesByLanderPlacementId = {
  params: Joi.object().keys({
    lenderPlacement: Joi.objectId().required(),
  }),
};

export const updateAndSaveInitialEmailContent = {
  params: Joi.object().keys({
    emailTemplateId: Joi.objectId().required(),
  }),
  body: Joi.object().keys({
    from: Joi.string().email(),
    sendTo: Joi.array().items(Joi.string().email()),
    ccList: Joi.array().items(Joi.string().email()),
    bccList: Joi.array().items(Joi.string().email()),
    name: Joi.string(),
    subject: Joi.string(),
    dealDocument: Joi.array().items(Joi.objectId()),
    lenderPlacement: Joi.objectId,
    emailContent: Joi.string(),
    deal: Joi.objectId(),
    emailAttachments: Joi.array().items(Joi.object()),
    totalLoanAmount: Joi.number(),
    templateName: Joi.string(),
    advisorName: Joi.string(),
  }),
};

export const listTemplateByLenderPlacement = {
  params: Joi.object().keys({
    lenderPlacement: Joi.objectId().required(),
  }),
};
