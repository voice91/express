/**
 * This file is generated by Appinvento, also it can be overwritten by Appinvento.
 * Only fields name will be overwritten, if the field name will be changed.
 */
import Joi from 'joi';
import config from 'config/config';
import enumFields from 'models/enum.model';

Joi.objectId = require('joi-objectid')(Joi);

const termsEmbed = Joi.object().keys({
  initialFunding: Joi.number().integer().required(),
  futureFunding: Joi.number().integer(),
  totalLoanAmount: Joi.number().integer(),
  interestRateType: Joi.string().valid(...Object.values(enumFields.EnumInterestRateTypeOfTerms)),
  interestRateIndexValue: Joi.string(),
  interestRateIndexDate: Joi.date(),
  spread: Joi.number().integer(),
  totalRate: Joi.string(),
  rateNotes: Joi.string(),
  initialTerm: Joi.string(),
  extensionOptionOne: Joi.string(),
  extensionFee: Joi.string(),
  interestRateIndex: Joi.string(),
  extensionOptionTwo: Joi.string(),
  LTC: Joi.string(),
  extensionFeeTwo: Joi.string(),
  termNotes: Joi.string(),
  prePayment: Joi.array().items(Joi.number()),
  IO: Joi.string(),
  amortization: Joi.string(),
  originationFee: Joi.string(),
  exitFee: Joi.string(),
  recourse: Joi.string(),
  asIsLTV: Joi.string(),
  stabilizedLTV: Joi.string(),
  asIsDY: Joi.string(),
  stabilizedDY: Joi.string(),
  asIsDSCR: Joi.string(),
  generalNotes: Joi.string(),
});
export const createLenderPlacement = {
  body: Joi.object().keys({
    lendingInstitution: Joi.array().items(Joi.objectId().required()),
    lenderContact: Joi.objectId(),
    deal: Joi.objectId(),
    notes: Joi.array().items(Joi.string()),
    stage: Joi.string().valid(...Object.values(enumFields.EnumStageOfLenderPlacement)),
    terms: termsEmbed,
    termSheet: Joi.string().regex(
      new RegExp(
        `https://${config.aws.bucket}.s3.amazonaws.com\\b([-a-zA-Z0-9()@:%_+.~#?&amp;/=]*.(pdf|doc|docx|ppt|xls|xlsx|pptx)$)`
      )
    ),
  }),
};

export const createLenderPlacementFromId = {
  body: Joi.object().keys({
    lenderInstitute: Joi.array().items(Joi.objectId()).required(),
  }),
};

export const updateLenderPlacement = {
  body: Joi.object().keys({
    lendingInstitution: Joi.objectId(),
    lenderContact: Joi.objectId(),
    notes: Joi.array().items(Joi.string()),
    stage: Joi.string().valid(...Object.values(enumFields.EnumStageOfLenderPlacement)),
    terms: termsEmbed,
    termSheet: Joi.string().regex(
      new RegExp(
        `https://${config.aws.bucket}.s3.amazonaws.com\\b([-a-zA-Z0-9()@:%_+.~#?&amp;/=]*.(pdf|doc|docx|ppt|xls|xlsx|pptx)$)`
      )
    ),
  }),
  params: Joi.object().keys({
    lenderPlacementId: Joi.objectId().required(),
  }),
};

export const getLenderPlacementById = {
  params: Joi.object().keys({
    lenderPlacementId: Joi.objectId().required(),
  }),
};

export const deleteLenderPlacementById = {
  params: Joi.object().keys({
    lenderPlacementId: Joi.objectId().required(),
  }),
};

export const getLenderPlacement = {
  body: Joi.object().keys({}).unknown(true),
};

export const paginatedLenderPlacement = {
  body: Joi.object().keys({}).unknown(true),
  query: Joi.object()
    .keys({
      page: Joi.number().default(1),
      limit: Joi.number().default(10).max(100),
    })
    .unknown(true),
};

export const sendDeal = {
  body: Joi.object().keys({
    lenderInstitute: Joi.array().items(Joi.objectId()).required(),
    deal: Joi.objectId().required(),
    template: Joi.string().valid(...Object.values(enumFields.EnumTypeOfTemplate)),
  }),
};
